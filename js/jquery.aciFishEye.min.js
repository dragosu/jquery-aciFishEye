
/*
 * aciFishEye jQuery Plugin v1.0
 * http://acoderinsights.ro
 *
 * Copyright (c) 2012 Dragos Ursu
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Require jQuery Library http://jquery.com
 *
 * Date: Fri Apr 6 19:15 2012 +0200
 */

(function(a){a.aciFishEye={nameSpace:".aciFishEye"};a.fn.aciFishEye=function(b,c){if(typeof b=="string"){return a(this)._aciFishEye(b,c)}return this.each(function(){return a(this)._aciFishEye(b,c)})};a.fn.aciFishEye.defaults={left:".aciLeft",right:".aciRight",top:".aciTop",bottom:".aciBottom",block:"li",element:"img",show:null,hide:null,display:null,fixed:true,width:50,height:50,grow:50,shrink:200,easing:"swing"};a.fn._aciFishEye=function(d,f){var h=this;var c=a.extend({},a.fn.aciFishEye.defaults,d);var b=function(){if((typeof d=="undefined")||(typeof d=="object")){g()}if(typeof d=="string"){if(h.data("customUi"+a.aciFishEye.nameSpace)){switch(d){case"options":return h.data("options"+a.aciFishEye.nameSpace);case"destroy":e()}}else{switch(d){case"options":return c}}}return h};var e=function(){if(h.data("customUi"+a.aciFishEye.nameSpace)){h.removeData("customUi"+a.aciFishEye.nameSpace);h.removeData("options"+a.aciFishEye.nameSpace);h.find(c.block).unbind(a.aciFishEye.nameSpace)}};var g=function(){if(h.data("customUi"+a.aciFishEye.nameSpace)){return}h.data("customUi"+a.aciFishEye.nameSpace,true);h.data("options"+a.aciFishEye.nameSpace,c);var k=h.find(c.block+":first");var j=(k.css("float")=="left")||(k.css("float")=="right");k=k.find(c.element);var o={width:k.width(),height:k.height()};var q={width:c.width,height:c.height};var r=function(u,t){if(u){return{left:0,top:0}}if(h.is(c.left)){return{left:0,top:c.fixed?Math.floor((q.height-t.height)/2):0}}else{if(h.is(c.right)){return{left:q.width-t.width,top:c.fixed?Math.floor((q.height-t.height)/2):0}}else{if(h.is(c.top)){return{left:c.fixed?Math.floor((q.width-t.width)/2):0,top:0}}else{if(h.is(c.bottom)){return{left:c.fixed?Math.floor((q.width-t.width)/2):0,top:q.height-t.height}}else{if(j){return{left:c.fixed?Math.floor((q.width-t.width)/2):0,top:Math.floor((q.height-t.height)/2)}}else{return{left:Math.floor((q.width-t.width)/2),top:c.fixed?Math.floor((q.height-t.height)/2):0}}}}}}};var l=function(u,v){var t=q.width-o.width;var w=Math.abs(v-u.width());return Math.ceil(w*c.grow/t)};var m=null;var n=function(x,v,u){if(m){var w=m;m=null;n(w,!v,u)}if(x){m=x;if(c.show){var t=a(x).find(c.show);if(c.display){c.display(t,v,u)}else{if(v){t.stop().hide().css("opacity",1).fadeIn(u)}else{t.stop().fadeOut(u)}}}if(c.hide){var t=a(x).find(c.hide);if(c.display){c.display(t,!v,u)}else{if(v){t.stop().fadeOut(u)}else{t.stop().hide().css("opacity",1).fadeIn(u)}}}}};var p=function(){var v=r(true,o);var t=a(this).find(c.element);var u=l(t,q.width);t.stop().animate({easing:c.easing,"margin-left":v.left+"px","margin-top":v.top+"px",width:q.width+"px",height:q.height+"px"},u);n(this,true,u)};var s=function(t){var I=t.pageX-a(this).offset().left;var G=t.pageY-a(this).offset().top;var C=h.find(c.block);if(j){var J=I-q.width/2;var D=0.7*Math.abs(J)/q.width}else{var J=G-q.height/2;var D=0.7*Math.abs(J)/q.height}var B=C.index(this);var w=(q.width-o.width)/3;var v=(q.height-o.height)/3;var H=w*D*((J<0)?1:-1);var F=v*D*((J<0)?1:-1);var u=Math.floor(o.width+w+H);var K=Math.floor(o.height+v+F);for(var A=B-2;A<B;A++){if(A>=0){var E=r(false,{width:u,height:K});var z=C.eq(A).find(c.element);z.stop().animate({easing:c.easing,"margin-left":E.left+"px","margin-top":E.top+"px",width:u+"px",height:K+"px"},l(z,u))}u+=Math.floor(w+H);K+=Math.floor(v+F)}H=-H;F=-F;u=Math.floor(o.width+w+H);K=Math.floor(o.height+v+F);for(var A=B+2;A>B;A--){if(A<=C.length-1){var E=r(false,{width:u,height:K});var z=C.eq(A).find(c.element);z.stop().animate({easing:c.easing,"margin-left":E.left+"px","margin-top":E.top+"px",width:u+"px",height:K+"px"},l(z,u))}u+=Math.floor(w+H);K+=Math.floor(v+F)}};var i=function(u){if(u.relatedTarget){var v=h.find(c.block);var t=v.index(u.relatedTarget);if(t<0){var w=r(false,o);v.find(c.element).stop().animate({easing:c.easing,"margin-left":w.left+"px","margin-top":w.top+"px",width:o.width+"px",height:o.height+"px"},c.shrink);n(null,true,c.shrink)}}};h.find(c.block).on("mouseenter"+a.aciFishEye.nameSpace,p);h.find(c.block).on("mousemove"+a.aciFishEye.nameSpace,s);h.find(c.block).on("mouseleave"+a.aciFishEye.nameSpace,i)};return b()}})(jQuery);
